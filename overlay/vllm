#!/usr/bin/env bash
set -euo pipefail

HOST="0.0.0.0"
PORT="8000"

# Parse --host/--port hvis vllm-stack sender dem
args=("$@")
for ((i=0; i<${#args[@]}; i++)); do
  if [[ "${args[$i]}" == "--host" && $((i+1)) -lt ${#args[@]} ]]; then
    HOST="${args[$((i+1))]}"
  fi
  if [[ "${args[$i]}" == "--port" && $((i+1)) -lt ${#args[@]} ]]; then
    PORT="${args[$((i+1))]}"
  fi
done

export HOST PORT

# Viktig: vllm/vllm-openai image har python3, ikke python
exec python3 /app/server.py
